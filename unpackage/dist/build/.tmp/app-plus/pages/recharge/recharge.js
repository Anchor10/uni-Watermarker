(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/recharge/recharge"],{2742:function(e,t,n){"use strict";var a=n("9307"),o=n.n(a);o.a},"426f":function(e,t,n){"use strict";n.r(t);var a=n("bac7"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},"5d8e":function(e,t,n){"use strict";n.r(t);var a=n("a8ef"),o=n("426f");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("2742");var c=n("2877"),s=Object(c["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=s.exports},9307:function(e,t,n){},a8ef:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},bac7:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){return n.e("components/user-info/user-info").then(n.bind(null,"1382"))},o={data:function(){return{userInfo:{},token:"",current:0,items:[],timesList:[],dateList:[],cur:0}},onLoad:function(){var t=this;e.getStorage({key:"TOKEN",success:function(e){t.token=e.data}}),this.getUserInfo(),this.getRechargeList(),e.authorize({scope:"scope.userInfo",success:function(e){console.log(e," at pages\\recharge\\recharge.vue:55")}})},onShow:function(){var e=this.$checkLogin("/pages/mine/mine",2);if(!e)return!1},methods:{getUserInfo:function(){var e=this;this.$uniRequest(this.$baseUrl+"/v1/member/info",0,function(t){e.userInfo=t.data.data},!1)},tabChange:function(e,t){this.current!==t&&(this.current=t,this.cur=0)},getRechargeList:function(){var e=this;this.$uniRequest(this.$baseUrl+"/v1/vip/setting",0,function(t){if(200==t.data.code){var n=t.data.data;console.log(t," at pages\\recharge\\recharge.vue:87"),e.items=n.list.reverse()}})},selectItem:function(e,t){this.cur!==t&&(this.cur=t)},payment:function(){var e=this;console.log(123," at pages\\recharge\\recharge.vue:99"),this.$uniRequest(this.$baseUrl+"/v1/vip/order",{vip_id:9},function(t){console.log(t," at pages\\recharge\\recharge.vue:106"),e.order_id=t.data.data.order_id})},paySearch:function(){this.$uniRequest(this.$baseUrl+"/v1/order/query",{order_id:this.order_id},function(e){console.log(e," at pages\\recharge\\recharge.vue:118")})},weixinPay:function(){var t=this;console.log("发起支付"," at pages\\recharge\\recharge.vue:123"),e.login({success:function(n){console.log("login success",n," at pages\\recharge\\recharge.vue:140"),e.request({url:"https://unidemo.dcloud.net.cn/payment/wx/mp?code=".concat(n.code,"&amount=20"),success:function(n){if(console.log("pay request success",n," at pages\\recharge\\recharge.vue:144"),200===n.statusCode)if(0===n.data.ret){console.log("得到接口prepay_id",n.data.payment," at pages\\recharge\\recharge.vue:153");var a=n.data.payment;e.requestPayment({timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:"MD5",paySign:a.paySign,success:function(t){e.showToast({title:"感谢您的赞助!"})},fail:function(t){e.showModal({content:"支付失败,原因为: "+t.errMsg,showCancel:!1})},complete:function(){t.loading=!1}})}else e.showModal({content:"支付太失败了",showCancel:!1});else e.showModal({content:"支付失败，请重试！",showCancel:!1})},fail:function(n){console.log("fail",n," at pages\\recharge\\recharge.vue:185"),t.loading=!1,e.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})},fail:function(n){console.log("fail",n," at pages\\recharge\\recharge.vue:195"),t.loading=!1,e.showModal({content:"支付失败,原因为: "+n.errMsg,showCancel:!1})}})}},components:{UserInfo:a}};t.default=o}).call(this,n("6e42")["default"])}},[["02f6","common/runtime","common/vendor"]]]);